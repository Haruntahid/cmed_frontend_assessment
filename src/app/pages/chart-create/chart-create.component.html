<h2>Create a Chart</h2>
<form (ngSubmit)="onSubmit()" class="form-box">
  <div>
    <label>Chart Name:</label>
    <input type="text" [(ngModel)]="chartName" name="chartName" required />
    <span *ngIf="submitted && !chartName" class="error-text">
      Chart name is required.
    </span>
  </div>

  <div>
    <label>Chart Type:</label>
    <select [(ngModel)]="chartType" name="chartType" required>
      <option value="" disabled>Select type</option>
      <option *ngFor="let type of chartTypes" [value]="type.value">
        {{ type.label }}
      </option>
    </select>
    <span *ngIf="submitted && !chartType" class="error-text">
      Chart type is required.
    </span>
  </div>

  <div>
    <label>Color Scheme:</label>
    <select [(ngModel)]="selectedScheme" name="colorScheme" required>
      <option value="" disabled>Select scheme</option>
      <option *ngFor="let scheme of colorSchemes" [ngValue]="scheme.colors">
        {{ scheme.name }}
      </option>
    </select>
    <span *ngIf="submitted && selectedScheme.length === 0" class="error-text">
      Color scheme is required.
    </span>
  </div>

  <button type="submit">
    {{ isEditingIndex !== null ? "Update Chart" : "Create Chart" }}
  </button>
</form>

<hr />

<div *ngFor="let chart of charts; let i = index" class="chart-box">
  <div class="chart-header">
    <h3>{{ chart.name }} ({{ chart.type }})</h3>
    <div class="actions">
      <button (click)="editChart(i)">Edit</button>
      <button (click)="deleteChart(i)">Delete</button>
      <button (click)="resizeChart(i, true)">+</button>
      <button (click)="resizeChart(i, false)">-</button>
    </div>
  </div>

  <div
    [style.width.px]="chart.width"
    [style.height.px]="chart.height"
    class="chart-container"
  >
    <canvas
      baseChart
      [data]="chart.data"
      [type]="chart.type"
      [legend]="true"
      [options]="chartOptions"
    ></canvas>
  </div>
</div>
